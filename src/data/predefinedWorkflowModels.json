[
  {
    "code": "WF_DL_01",
    "name": "Workflow Dépôt Légal",
    "module": "legal_deposit",
    "workflow_type": "legal_deposit",
    "version": "1.0",
    "description": "Circuit de traitement du dépôt légal jusqu'à validation et archivage.",
    "color": "blue",
    "steps": [
      {
        "order": 1,
        "name": "Soumission du dépôt",
        "type": "creation",
        "required_role": "Auteur/Éditeur",
        "description": "Soumission initiale du document pour dépôt légal"
      },
      {
        "order": 2,
        "name": "Vérification de conformité",
        "type": "validation",
        "required_role": "Agent Dépôt Légal",
        "description": "Vérification de la conformité du dépôt"
      },
      {
        "order": 3,
        "name": "Validation BNRM",
        "type": "validation",
        "required_role": "Validateur BN",
        "description": "Validation finale par le responsable BNRM"
      },
      {
        "order": 4,
        "name": "Archivage",
        "type": "archivage",
        "required_role": "Archiviste GED",
        "description": "Archivage sécurisé du document validé"
      }
    ],
    "transitions": [
      {
        "name": "Soumettre le dépôt",
        "from_step": 0,
        "to_step": 1,
        "trigger_type": "manual",
        "action": "Soumettre"
      },
      {
        "name": "Vérifier la conformité",
        "from_step": 1,
        "to_step": 2,
        "trigger_type": "manual",
        "action": "Valider"
      },
      {
        "name": "Validation finale",
        "from_step": 2,
        "to_step": 3,
        "trigger_type": "manual",
        "action": "Approuver"
      },
      {
        "name": "Archiver",
        "from_step": 3,
        "to_step": null,
        "trigger_type": "automatic",
        "action": "Archiver"
      },
      {
        "name": "Retour pour correction",
        "from_step": 1,
        "to_step": 0,
        "trigger_type": "manual",
        "action": "Rejeter"
      },
      {
        "name": "Retour depuis validation",
        "from_step": 2,
        "to_step": 1,
        "trigger_type": "manual",
        "action": "Corriger"
      }
    ],
    "roles": [
      {"name": "Auteur/Éditeur", "level": "module"},
      {"name": "Agent Dépôt Légal", "level": "module"},
      {"name": "Validateur BN", "level": "module"},
      {"name": "Archiviste GED", "level": "system"}
    ]
  },
  {
    "code": "WF_CAT_01",
    "name": "Workflow Catalogage",
    "module": "cataloging",
    "workflow_type": "cataloging",
    "version": "1.0",
    "description": "Création, validation et publication des notices bibliographiques.",
    "color": "green",
    "steps": [
      {
        "order": 1,
        "name": "Création de la notice",
        "type": "creation",
        "required_role": "Catalogueur",
        "description": "Création initiale de la notice bibliographique"
      },
      {
        "order": 2,
        "name": "Validation du catalogage",
        "type": "validation",
        "required_role": "Responsable Validation",
        "description": "Vérification et validation de la notice"
      },
      {
        "order": 3,
        "name": "Publication dans le portail",
        "type": "transmission",
        "required_role": "Administrateur BNRM",
        "description": "Publication de la notice dans le catalogue public"
      }
    ],
    "transitions": [
      {
        "name": "Créer la notice",
        "from_step": 0,
        "to_step": 1,
        "trigger_type": "manual",
        "action": "Créer"
      },
      {
        "name": "Soumettre pour validation",
        "from_step": 1,
        "to_step": 2,
        "trigger_type": "manual",
        "action": "Soumettre"
      },
      {
        "name": "Publier",
        "from_step": 2,
        "to_step": null,
        "trigger_type": "manual",
        "action": "Publier"
      },
      {
        "name": "Retour pour correction",
        "from_step": 2,
        "to_step": 1,
        "trigger_type": "manual",
        "action": "Corriger"
      }
    ],
    "roles": [
      {"name": "Catalogueur", "level": "module"},
      {"name": "Responsable Validation", "level": "module"},
      {"name": "Administrateur BNRM", "level": "admin"}
    ]
  },
  {
    "code": "WF_GED_01",
    "name": "Workflow Archivage GED",
    "module": "ged",
    "workflow_type": "ged",
    "version": "1.0",
    "description": "Traitement documentaire jusqu'à l'archivage final sécurisé.",
    "color": "purple",
    "steps": [
      {
        "order": 1,
        "name": "Numérisation",
        "type": "creation",
        "required_role": "Agent Numérisation",
        "description": "Numérisation du document physique"
      },
      {
        "order": 2,
        "name": "Indexation et contrôle qualité",
        "type": "validation",
        "required_role": "Contrôleur Qualité",
        "description": "Indexation et vérification de la qualité"
      },
      {
        "order": 3,
        "name": "Validation",
        "type": "validation",
        "required_role": "Responsable GED",
        "description": "Validation finale avant archivage"
      },
      {
        "order": 4,
        "name": "Archivage sécurisé",
        "type": "archivage",
        "required_role": "Archiviste",
        "description": "Archivage définitif et sécurisé"
      }
    ],
    "transitions": [
      {
        "name": "Démarrer numérisation",
        "from_step": 0,
        "to_step": 1,
        "trigger_type": "manual",
        "action": "Numériser"
      },
      {
        "name": "Indexer",
        "from_step": 1,
        "to_step": 2,
        "trigger_type": "manual",
        "action": "Indexer"
      },
      {
        "name": "Valider",
        "from_step": 2,
        "to_step": 3,
        "trigger_type": "manual",
        "action": "Valider"
      },
      {
        "name": "Archiver définitivement",
        "from_step": 3,
        "to_step": null,
        "trigger_type": "automatic",
        "action": "Archiver"
      },
      {
        "name": "Rejeter",
        "from_step": 2,
        "to_step": 1,
        "trigger_type": "manual",
        "action": "Rejeter"
      }
    ],
    "roles": [
      {"name": "Agent Numérisation", "level": "module"},
      {"name": "Contrôleur Qualité", "level": "module"},
      {"name": "Responsable GED", "level": "module"},
      {"name": "Archiviste", "level": "system"}
    ]
  },
  {
    "code": "WF_CBM_01",
    "name": "Workflow CBM",
    "module": "cbm",
    "workflow_type": "cbm",
    "version": "1.0",
    "description": "Synchronisation et contrôle qualité des catalogues partenaires.",
    "color": "orange",
    "steps": [
      {
        "order": 1,
        "name": "Importation du catalogue partenaire",
        "type": "creation",
        "required_role": "Bibliothèque Partenaire",
        "description": "Import des données du catalogue partenaire"
      },
      {
        "order": 2,
        "name": "Vérification des métadonnées",
        "type": "validation",
        "required_role": "Coordinateur CBM",
        "description": "Contrôle qualité des métadonnées importées"
      },
      {
        "order": 3,
        "name": "Fusion / Résolution des doublons",
        "type": "correction",
        "required_role": "Coordinateur CBM",
        "description": "Fusion et déduplication des notices"
      },
      {
        "order": 4,
        "name": "Publication CBM",
        "type": "transmission",
        "required_role": "Administrateur CBM",
        "description": "Publication dans le catalogue collectif"
      }
    ],
    "transitions": [
      {
        "name": "Importer catalogue",
        "from_step": 0,
        "to_step": 1,
        "trigger_type": "manual",
        "action": "Importer"
      },
      {
        "name": "Vérifier",
        "from_step": 1,
        "to_step": 2,
        "trigger_type": "manual",
        "action": "Vérifier"
      },
      {
        "name": "Fusionner",
        "from_step": 2,
        "to_step": 3,
        "trigger_type": "manual",
        "action": "Fusionner"
      },
      {
        "name": "Publier CBM",
        "from_step": 3,
        "to_step": null,
        "trigger_type": "manual",
        "action": "Publier"
      },
      {
        "name": "Retour pour correction",
        "from_step": 2,
        "to_step": 1,
        "trigger_type": "manual",
        "action": "Corriger"
      }
    ],
    "roles": [
      {"name": "Bibliothèque Partenaire", "level": "module"},
      {"name": "Coordinateur CBM", "level": "module"},
      {"name": "Administrateur CBM", "level": "admin"}
    ]
  },
  {
    "code": "WF_PAY_01",
    "name": "Workflow e-Payment",
    "module": "payment",
    "workflow_type": "payment",
    "version": "1.0",
    "description": "Validation et confirmation de paiements électroniques.",
    "color": "yellow",
    "steps": [
      {
        "order": 1,
        "name": "Création de la demande de paiement",
        "type": "creation",
        "required_role": "Utilisateur Demandeur",
        "description": "Initiation de la demande de paiement"
      },
      {
        "order": 2,
        "name": "Validation du paiement",
        "type": "validation",
        "required_role": "Gestionnaire Financier",
        "description": "Validation des informations de paiement"
      },
      {
        "order": 3,
        "name": "Confirmation de transaction",
        "type": "validation",
        "required_role": "Responsable e-Payment",
        "description": "Confirmation de la transaction bancaire"
      },
      {
        "order": 4,
        "name": "Archivage comptable",
        "type": "archivage",
        "required_role": "Service Comptabilité",
        "description": "Archivage de la transaction"
      }
    ],
    "transitions": [
      {
        "name": "Initier paiement",
        "from_step": 0,
        "to_step": 1,
        "trigger_type": "manual",
        "action": "Initier"
      },
      {
        "name": "Valider",
        "from_step": 1,
        "to_step": 2,
        "trigger_type": "manual",
        "action": "Valider"
      },
      {
        "name": "Confirmer",
        "from_step": 2,
        "to_step": 3,
        "trigger_type": "automatic",
        "action": "Confirmer"
      },
      {
        "name": "Archiver",
        "from_step": 3,
        "to_step": null,
        "trigger_type": "automatic",
        "action": "Archiver"
      },
      {
        "name": "Annuler",
        "from_step": 1,
        "to_step": null,
        "trigger_type": "manual",
        "action": "Annuler"
      }
    ],
    "roles": [
      {"name": "Utilisateur Demandeur", "level": "module"},
      {"name": "Gestionnaire Financier", "level": "module"},
      {"name": "Responsable e-Payment", "level": "module"},
      {"name": "Service Comptabilité", "level": "system"}
    ]
  },
  {
    "code": "WF_PUB_01",
    "name": "Workflow Publication de contenu",
    "module": "portal",
    "workflow_type": "content",
    "version": "1.0",
    "description": "Gestion des contenus à publier avec validation éditoriale.",
    "color": "red",
    "steps": [
      {
        "order": 1,
        "name": "Création de contenu",
        "type": "creation",
        "required_role": "Rédacteur",
        "description": "Rédaction du contenu"
      },
      {
        "order": 2,
        "name": "Relecture et validation",
        "type": "validation",
        "required_role": "Responsable Éditorial",
        "description": "Relecture et validation éditoriale"
      },
      {
        "order": 3,
        "name": "Publication sur le portail",
        "type": "transmission",
        "required_role": "Administrateur Portail",
        "description": "Publication sur le site web"
      }
    ],
    "transitions": [
      {
        "name": "Créer contenu",
        "from_step": 0,
        "to_step": 1,
        "trigger_type": "manual",
        "action": "Créer"
      },
      {
        "name": "Soumettre pour validation",
        "from_step": 1,
        "to_step": 2,
        "trigger_type": "manual",
        "action": "Soumettre"
      },
      {
        "name": "Publier",
        "from_step": 2,
        "to_step": null,
        "trigger_type": "manual",
        "action": "Publier"
      },
      {
        "name": "Rejeter",
        "from_step": 2,
        "to_step": 1,
        "trigger_type": "manual",
        "action": "Rejeter"
      }
    ],
    "roles": [
      {"name": "Rédacteur", "level": "module"},
      {"name": "Responsable Éditorial", "level": "module"},
      {"name": "Administrateur Portail", "level": "admin"}
    ]
  },
  {
    "code": "WF_STAT_01",
    "name": "Workflow Reporting et Statistiques",
    "module": "analytics",
    "workflow_type": "reporting",
    "version": "1.0",
    "description": "Génération et validation des rapports statistiques.",
    "color": "cyan",
    "steps": [
      {
        "order": 1,
        "name": "Génération de rapport",
        "type": "creation",
        "required_role": "Analyste",
        "description": "Génération automatique du rapport"
      },
      {
        "order": 2,
        "name": "Vérification des indicateurs",
        "type": "validation",
        "required_role": "Responsable Suivi-Évaluation",
        "description": "Vérification des données statistiques"
      },
      {
        "order": 3,
        "name": "Validation finale",
        "type": "validation",
        "required_role": "Direction BNRM",
        "description": "Approbation finale du rapport"
      },
      {
        "order": 4,
        "name": "Archivage / diffusion",
        "type": "archivage",
        "required_role": "Administrateur Reporting",
        "description": "Archivage et diffusion du rapport"
      }
    ],
    "transitions": [
      {
        "name": "Générer rapport",
        "from_step": 0,
        "to_step": 1,
        "trigger_type": "automatic",
        "action": "Générer"
      },
      {
        "name": "Vérifier",
        "from_step": 1,
        "to_step": 2,
        "trigger_type": "manual",
        "action": "Vérifier"
      },
      {
        "name": "Valider",
        "from_step": 2,
        "to_step": 3,
        "trigger_type": "manual",
        "action": "Valider"
      },
      {
        "name": "Archiver et diffuser",
        "from_step": 3,
        "to_step": null,
        "trigger_type": "automatic",
        "action": "Diffuser"
      },
      {
        "name": "Régénérer",
        "from_step": 2,
        "to_step": 1,
        "trigger_type": "manual",
        "action": "Corriger"
      }
    ],
    "roles": [
      {"name": "Analyste", "level": "module"},
      {"name": "Responsable Suivi-Évaluation", "level": "module"},
      {"name": "Direction BNRM", "level": "admin"},
      {"name": "Administrateur Reporting", "level": "system"}
    ]
  },
  {
    "code": "WF_CULT_01",
    "name": "Workflow Réservation Espaces Culturels",
    "module": "cultural_activities",
    "workflow_type": "booking",
    "version": "1.0",
    "description": "Gestion complète des demandes de réservation d'espaces culturels avec validation multi-niveaux.",
    "color": "emerald",
    "steps": [
      {
        "order": 1,
        "name": "Réception et validation initiale",
        "type": "creation",
        "required_role": "Gestionnaire Activités Culturelles",
        "description": "Réception de la demande et vérification de la complétude du dossier"
      },
      {
        "order": 2,
        "name": "Décision de la Direction",
        "type": "validation",
        "required_role": "Directeur BNRM",
        "description": "Validation ou refus de la demande par la Direction"
      },
      {
        "order": 3,
        "name": "Traitement par le DAC",
        "type": "validation",
        "required_role": "Département Action Culturelle",
        "description": "Vérification disponibilité et confirmation du créneau"
      },
      {
        "order": 4,
        "name": "Contractualisation",
        "type": "validation",
        "required_role": "Service Juridique",
        "description": "Préparation et signature du contrat de location"
      },
      {
        "order": 5,
        "name": "Facturation",
        "type": "validation",
        "required_role": "Service Financier",
        "description": "Émission de la facture et suivi du paiement"
      },
      {
        "order": 6,
        "name": "Mise à disposition",
        "type": "transmission",
        "required_role": "Gestionnaire Espaces",
        "description": "Remise des clés et états des lieux d'entrée/sortie"
      },
      {
        "order": 7,
        "name": "Facturation complémentaire",
        "type": "validation",
        "required_role": "Service Financier",
        "description": "Facturation des dégâts éventuels constatés"
      },
      {
        "order": 8,
        "name": "Clôture",
        "type": "archivage",
        "required_role": "Gestionnaire Activités Culturelles",
        "description": "Clôture du dossier et archivage"
      }
    ],
    "transitions": [
      {
        "name": "Démarrer le workflow",
        "from_step": 0,
        "to_step": 1,
        "trigger_type": "manual",
        "action": "Démarrer"
      },
      {
        "name": "Transmettre au Directeur",
        "from_step": 1,
        "to_step": 2,
        "trigger_type": "manual",
        "action": "Transmettre"
      },
      {
        "name": "Approuver par la Direction",
        "from_step": 2,
        "to_step": 3,
        "trigger_type": "manual",
        "action": "Approuver"
      },
      {
        "name": "Confirmer disponibilité",
        "from_step": 3,
        "to_step": 4,
        "trigger_type": "manual",
        "action": "Confirmer"
      },
      {
        "name": "Contrat signé",
        "from_step": 4,
        "to_step": 5,
        "trigger_type": "manual",
        "action": "Signer"
      },
      {
        "name": "Facture émise",
        "from_step": 5,
        "to_step": 6,
        "trigger_type": "manual",
        "action": "Facturer"
      },
      {
        "name": "États des lieux signés",
        "from_step": 6,
        "to_step": 8,
        "trigger_type": "manual",
        "action": "Valider"
      },
      {
        "name": "Dégâts constatés",
        "from_step": 6,
        "to_step": 7,
        "trigger_type": "manual",
        "action": "Constater"
      },
      {
        "name": "Facture complémentaire émise",
        "from_step": 7,
        "to_step": 8,
        "trigger_type": "manual",
        "action": "Facturer"
      },
      {
        "name": "Clôturer le dossier",
        "from_step": 8,
        "to_step": null,
        "trigger_type": "manual",
        "action": "Clôturer"
      },
      {
        "name": "Refuser la demande",
        "from_step": 1,
        "to_step": 8,
        "trigger_type": "manual",
        "action": "Refuser"
      },
      {
        "name": "Refus de la Direction",
        "from_step": 2,
        "to_step": 8,
        "trigger_type": "manual",
        "action": "Refuser"
      },
      {
        "name": "Indisponibilité",
        "from_step": 3,
        "to_step": 8,
        "trigger_type": "manual",
        "action": "Refuser"
      },
      {
        "name": "Mettre en vérification",
        "from_step": 1,
        "to_step": 1,
        "trigger_type": "manual",
        "action": "Vérifier"
      },
      {
        "name": "Cas sensible",
        "from_step": 2,
        "to_step": 2,
        "trigger_type": "manual",
        "action": "Vérifier"
      },
      {
        "name": "Archiver sans suite",
        "from_step": 8,
        "to_step": null,
        "trigger_type": "manual",
        "action": "Archiver"
      }
    ],
    "roles": [
      {"name": "Gestionnaire Activités Culturelles", "level": "module"},
      {"name": "Directeur BNRM", "level": "admin"},
      {"name": "Département Action Culturelle", "level": "module"},
      {"name": "Service Juridique", "level": "module"},
      {"name": "Service Financier", "level": "module"},
      {"name": "Gestionnaire Espaces", "level": "module"}
    ]
  },
  {
    "code": "WF_REST_01",
    "name": "Workflow Demandes de Restauration",
    "module": "restoration",
    "workflow_type": "restoration",
    "version": "1.0",
    "description": "Gestion complète des demandes de restauration de manuscrits avec circuit complet incluant autorisation, réception, diagnostic, devis, paiement et travaux de restauration.",
    "color": "indigo",
    "steps": [
      {
        "order": 1,
        "name": "Demande soumise",
        "type": "creation",
        "required_role": "Utilisateur",
        "description": "Soumission initiale de la demande de restauration"
      },
      {
        "order": 2,
        "name": "En attente autorisation",
        "type": "validation",
        "required_role": "Directeur Conservation",
        "description": "Attente de l'autorisation de la direction"
      },
      {
        "order": 3,
        "name": "Autorisée",
        "type": "validation",
        "required_role": "Gestionnaire Restauration",
        "description": "Demande autorisée par la direction"
      },
      {
        "order": 4,
        "name": "Œuvre reçue",
        "type": "transmission",
        "required_role": "Gestionnaire Restauration",
        "description": "Réception physique de l'œuvre à restaurer"
      },
      {
        "order": 5,
        "name": "Diagnostic",
        "type": "validation",
        "required_role": "Expert Restauration",
        "description": "Diagnostic technique de l'état de l'œuvre"
      },
      {
        "order": 6,
        "name": "Devis en attente",
        "type": "validation",
        "required_role": "Expert Restauration",
        "description": "Établissement et envoi du devis"
      },
      {
        "order": 7,
        "name": "Devis accepté",
        "type": "validation",
        "required_role": "Utilisateur",
        "description": "Acceptation du devis par le demandeur"
      },
      {
        "order": 8,
        "name": "Paiement validé",
        "type": "validation",
        "required_role": "Service Financier",
        "description": "Validation du paiement par le service financier"
      },
      {
        "order": 9,
        "name": "Restauration en cours",
        "type": "execution",
        "required_role": "Restaurateur",
        "description": "Travaux de restauration en cours"
      },
      {
        "order": 10,
        "name": "Terminée",
        "type": "validation",
        "required_role": "Expert Restauration",
        "description": "Restauration terminée et contrôle qualité effectué"
      },
      {
        "order": 11,
        "name": "Clôturée",
        "type": "archivage",
        "required_role": "Gestionnaire Restauration",
        "description": "Dossier clôturé et archivé"
      }
    ],
    "transitions": [
      {
        "name": "Soumettre la demande",
        "from_step": 0,
        "to_step": 1,
        "trigger_type": "manual",
        "action": "Soumettre"
      },
      {
        "name": "Demander autorisation",
        "from_step": 1,
        "to_step": 2,
        "trigger_type": "manual",
        "action": "Transmettre"
      },
      {
        "name": "Autoriser",
        "from_step": 2,
        "to_step": 3,
        "trigger_type": "manual",
        "action": "Autoriser"
      },
      {
        "name": "Refuser (Direction)",
        "from_step": 2,
        "to_step": null,
        "trigger_type": "manual",
        "action": "Refuser"
      },
      {
        "name": "Confirmer réception",
        "from_step": 3,
        "to_step": 4,
        "trigger_type": "manual",
        "action": "Recevoir"
      },
      {
        "name": "Établir diagnostic",
        "from_step": 4,
        "to_step": 5,
        "trigger_type": "manual",
        "action": "Diagnostiquer"
      },
      {
        "name": "Établir devis",
        "from_step": 5,
        "to_step": 6,
        "trigger_type": "manual",
        "action": "Établir devis"
      },
      {
        "name": "Accepter devis",
        "from_step": 6,
        "to_step": 7,
        "trigger_type": "manual",
        "action": "Accepter"
      },
      {
        "name": "Refuser devis",
        "from_step": 6,
        "to_step": null,
        "trigger_type": "manual",
        "action": "Refuser"
      },
      {
        "name": "Valider paiement",
        "from_step": 7,
        "to_step": 8,
        "trigger_type": "manual",
        "action": "Valider paiement"
      },
      {
        "name": "Démarrer restauration",
        "from_step": 8,
        "to_step": 9,
        "trigger_type": "manual",
        "action": "Démarrer"
      },
      {
        "name": "Terminer restauration",
        "from_step": 9,
        "to_step": 10,
        "trigger_type": "manual",
        "action": "Terminer"
      },
      {
        "name": "Clôturer le dossier",
        "from_step": 10,
        "to_step": 11,
        "trigger_type": "manual",
        "action": "Clôturer"
      },
      {
        "name": "Archiver",
        "from_step": 11,
        "to_step": null,
        "trigger_type": "automatic",
        "action": "Archiver"
      },
      {
        "name": "Retour pour correction",
        "from_step": 3,
        "to_step": 2,
        "trigger_type": "manual",
        "action": "Corriger"
      },
      {
        "name": "Retour après diagnostic",
        "from_step": 5,
        "to_step": 4,
        "trigger_type": "manual",
        "action": "Réviser"
      }
    ],
    "roles": [
      {"name": "Utilisateur", "level": "module"},
      {"name": "Directeur Conservation", "level": "admin"},
      {"name": "Gestionnaire Restauration", "level": "module"},
      {"name": "Expert Restauration", "level": "module"},
      {"name": "Service Financier", "level": "module"},
      {"name": "Restaurateur", "level": "module"}
    ]
  },
  {
    "code": "WF_REPRO_01",
    "name": "Workflow Demandes de Reproduction",
    "module": "reproduction",
    "workflow_type": "reproduction",
    "version": "1.0",
    "description": "Gestion des demandes de reproduction de documents avec tarification et validation.",
    "color": "rose",
    "steps": [
      {
        "order": 1,
        "name": "Soumission de la demande",
        "type": "creation",
        "required_role": "Utilisateur",
        "description": "Création de la demande de reproduction par l'utilisateur"
      },
      {
        "order": 2,
        "name": "Vérification et tarification",
        "type": "validation",
        "required_role": "Agent Reproduction",
        "description": "Vérification de la faisabilité et calcul du tarif"
      },
      {
        "order": 3,
        "name": "Validation Direction",
        "type": "validation",
        "required_role": "Responsable Service",
        "description": "Validation par le responsable du service"
      },
      {
        "order": 4,
        "name": "Traitement et réalisation",
        "type": "execution",
        "required_role": "Technicien Reproduction",
        "description": "Reproduction et numérisation des documents"
      },
      {
        "order": 5,
        "name": "Contrôle qualité",
        "type": "validation",
        "required_role": "Agent Reproduction",
        "description": "Vérification de la qualité des reproductions"
      },
      {
        "order": 6,
        "name": "Livraison",
        "type": "transmission",
        "required_role": "Agent Reproduction",
        "description": "Remise des documents au demandeur"
      }
    ],
    "transitions": [
      {
        "name": "Soumettre la demande",
        "from_step": 0,
        "to_step": 1,
        "trigger_type": "manual",
        "action": "Soumettre"
      },
      {
        "name": "Tarifier et valider",
        "from_step": 1,
        "to_step": 2,
        "trigger_type": "manual",
        "action": "Tarifier"
      },
      {
        "name": "Approuver",
        "from_step": 2,
        "to_step": 3,
        "trigger_type": "manual",
        "action": "Approuver"
      },
      {
        "name": "Commencer reproduction",
        "from_step": 3,
        "to_step": 4,
        "trigger_type": "manual",
        "action": "Démarrer"
      },
      {
        "name": "Contrôler",
        "from_step": 4,
        "to_step": 5,
        "trigger_type": "manual",
        "action": "Contrôler"
      },
      {
        "name": "Livrer",
        "from_step": 5,
        "to_step": null,
        "trigger_type": "manual",
        "action": "Livrer"
      },
      {
        "name": "Rejeter demande",
        "from_step": 1,
        "to_step": null,
        "trigger_type": "manual",
        "action": "Rejeter"
      },
      {
        "name": "Refuser",
        "from_step": 2,
        "to_step": null,
        "trigger_type": "manual",
        "action": "Refuser"
      },
      {
        "name": "Retour qualité",
        "from_step": 5,
        "to_step": 4,
        "trigger_type": "manual",
        "action": "Reprendre"
      }
    ],
    "roles": [
      {"name": "Utilisateur", "level": "module"},
      {"name": "Agent Reproduction", "level": "module"},
      {"name": "Responsable Service", "level": "module"},
      {"name": "Technicien Reproduction", "level": "module"}
    ]
  },
  {
    "code": "WF_VISIT_01",
    "name": "Workflow Réservations de Visite",
    "module": "visits",
    "workflow_type": "visit_booking",
    "version": "1.0",
    "description": "Gestion des réservations de visites guidées avec gestion des créneaux et confirmation.",
    "color": "amber",
    "steps": [
      {
        "order": 1,
        "name": "Réservation en ligne",
        "type": "creation",
        "required_role": "Visiteur",
        "description": "Création de la réservation par le visiteur"
      },
      {
        "order": 2,
        "name": "Vérification disponibilité",
        "type": "validation",
        "required_role": "Gestionnaire Visites",
        "description": "Vérification de la disponibilité du créneau"
      },
      {
        "order": 3,
        "name": "Confirmation",
        "type": "validation",
        "required_role": "Gestionnaire Visites",
        "description": "Confirmation de la réservation et envoi de la notification"
      },
      {
        "order": 4,
        "name": "Réalisation de la visite",
        "type": "execution",
        "required_role": "Guide",
        "description": "Accueil et visite guidée"
      }
    ],
    "transitions": [
      {
        "name": "Réserver",
        "from_step": 0,
        "to_step": 1,
        "trigger_type": "manual",
        "action": "Réserver"
      },
      {
        "name": "Vérifier",
        "from_step": 1,
        "to_step": 2,
        "trigger_type": "automatic",
        "action": "Vérifier"
      },
      {
        "name": "Confirmer",
        "from_step": 2,
        "to_step": 3,
        "trigger_type": "manual",
        "action": "Confirmer"
      },
      {
        "name": "Terminer",
        "from_step": 3,
        "to_step": null,
        "trigger_type": "manual",
        "action": "Terminer"
      },
      {
        "name": "Annuler",
        "from_step": 1,
        "to_step": null,
        "trigger_type": "manual",
        "action": "Annuler"
      },
      {
        "name": "Annuler confirmation",
        "from_step": 2,
        "to_step": null,
        "trigger_type": "manual",
        "action": "Annuler"
      }
    ],
    "roles": [
      {"name": "Visiteur", "level": "module"},
      {"name": "Gestionnaire Visites", "level": "module"},
      {"name": "Guide", "level": "module"}
    ]
  },
  {
    "code": "WF_CBM_01",
    "name": "Demandes d'Adhésion CBM",
    "module": "cbm",
    "workflow_type": "cbm_adhesion",
    "version": "1.0",
    "description": "Circuit de validation des demandes d'adhésion au réseau CBM (Catalogue Bibliographique Marocain).",
    "color": "cyan",
    "steps": [
      {
        "order": 1,
        "name": "Soumission de la demande",
        "type": "creation",
        "required_role": "Demandeur",
        "description": "Le demandeur soumet sa demande d'adhésion avec les documents requis"
      },
      {
        "order": 2,
        "name": "Vérification des documents",
        "type": "validation",
        "required_role": "Agent CBM",
        "description": "Vérification de la complétude et de la conformité des documents"
      },
      {
        "order": 3,
        "name": "Validation technique",
        "type": "validation",
        "required_role": "Responsable Technique CBM",
        "description": "Validation des critères techniques et des capacités de la bibliothèque"
      },
      {
        "order": 4,
        "name": "Approbation finale",
        "type": "approbation",
        "required_role": "Directeur CBM",
        "description": "Décision finale sur l'adhésion au réseau"
      },
      {
        "order": 5,
        "name": "Notification",
        "type": "notification",
        "required_role": "Système",
        "description": "Notification du demandeur de la décision"
      }
    ],
    "transitions": [
      {
        "name": "Soumettre la demande",
        "from_step": 0,
        "to_step": 1,
        "trigger_type": "manual",
        "action": "Soumettre"
      },
      {
        "name": "Valider les documents",
        "from_step": 1,
        "to_step": 2,
        "trigger_type": "manual",
        "action": "Valider"
      },
      {
        "name": "Approuver techniquement",
        "from_step": 2,
        "to_step": 3,
        "trigger_type": "manual",
        "action": "Approuver"
      },
      {
        "name": "Approbation finale",
        "from_step": 3,
        "to_step": 4,
        "trigger_type": "manual",
        "action": "Approuver définitivement"
      },
      {
        "name": "Notifier le demandeur",
        "from_step": 4,
        "to_step": null,
        "trigger_type": "automatic",
        "action": "Notifier"
      },
      {
        "name": "Demander corrections",
        "from_step": 1,
        "to_step": 0,
        "trigger_type": "manual",
        "action": "Demander modification"
      },
      {
        "name": "Rejeter la demande",
        "from_step": 2,
        "to_step": 4,
        "trigger_type": "manual",
        "action": "Rejeter"
      },
      {
        "name": "Rejeter définitivement",
        "from_step": 3,
        "to_step": 4,
        "trigger_type": "manual",
        "action": "Rejeter"
      }
    ],
    "roles": [
      {"name": "Demandeur", "level": "module"},
      {"name": "Agent CBM", "level": "module"},
      {"name": "Responsable Technique CBM", "level": "module"},
      {"name": "Directeur CBM", "level": "module"},
      {"name": "Système", "level": "system"}
    ]
  },
  {
    "code": "WF_CBM_02",
    "name": "Demandes de Formation CBM",
    "module": "cbm",
    "workflow_type": "cbm_formation",
    "version": "1.0",
    "description": "Circuit de validation et d'organisation des formations pour les bibliothèques du réseau CBM.",
    "color": "purple",
    "steps": [
      {
        "order": 1,
        "name": "Soumission de la demande",
        "type": "creation",
        "required_role": "Bibliothèque",
        "description": "La bibliothèque soumet une demande de formation avec les besoins identifiés"
      },
      {
        "order": 2,
        "name": "Analyse des besoins",
        "type": "validation",
        "required_role": "Responsable Formation CBM",
        "description": "Analyse et évaluation des besoins en formation"
      },
      {
        "order": 3,
        "name": "Planification",
        "type": "planification",
        "required_role": "Coordinateur Pédagogique",
        "description": "Élaboration du programme et planification des sessions"
      },
      {
        "order": 4,
        "name": "Validation budgétaire",
        "type": "validation",
        "required_role": "Responsable Administratif",
        "description": "Validation du budget et des ressources nécessaires"
      },
      {
        "order": 5,
        "name": "Approbation finale",
        "type": "approbation",
        "required_role": "Directeur CBM",
        "description": "Approbation finale et programmation de la formation"
      },
      {
        "order": 6,
        "name": "Notification et confirmation",
        "type": "notification",
        "required_role": "Système",
        "description": "Notification de la bibliothèque avec dates et modalités"
      }
    ],
    "transitions": [
      {
        "name": "Soumettre la demande",
        "from_step": 0,
        "to_step": 1,
        "trigger_type": "manual",
        "action": "Soumettre"
      },
      {
        "name": "Analyser les besoins",
        "from_step": 1,
        "to_step": 2,
        "trigger_type": "manual",
        "action": "Analyser"
      },
      {
        "name": "Planifier la formation",
        "from_step": 2,
        "to_step": 3,
        "trigger_type": "manual",
        "action": "Planifier"
      },
      {
        "name": "Valider le budget",
        "from_step": 3,
        "to_step": 4,
        "trigger_type": "manual",
        "action": "Valider budget"
      },
      {
        "name": "Approuver définitivement",
        "from_step": 4,
        "to_step": 5,
        "trigger_type": "manual",
        "action": "Approuver"
      },
      {
        "name": "Confirmer et notifier",
        "from_step": 5,
        "to_step": null,
        "trigger_type": "automatic",
        "action": "Notifier"
      },
      {
        "name": "Demander précisions",
        "from_step": 1,
        "to_step": 0,
        "trigger_type": "manual",
        "action": "Demander modification"
      },
      {
        "name": "Rejeter pour raisons pédagogiques",
        "from_step": 2,
        "to_step": 5,
        "trigger_type": "manual",
        "action": "Rejeter"
      },
      {
        "name": "Rejeter pour raisons budgétaires",
        "from_step": 3,
        "to_step": 5,
        "trigger_type": "manual",
        "action": "Rejeter"
      },
      {
        "name": "Rejeter définitivement",
        "from_step": 4,
        "to_step": 5,
        "trigger_type": "manual",
        "action": "Rejeter"
      }
    ],
    "roles": [
      {"name": "Bibliothèque", "level": "module"},
      {"name": "Responsable Formation CBM", "level": "module"},
      {"name": "Coordinateur Pédagogique", "level": "module"},
      {"name": "Responsable Administratif", "level": "module"},
      {"name": "Directeur CBM", "level": "module"},
      {"name": "Système", "level": "system"}
    ]
  }
]
